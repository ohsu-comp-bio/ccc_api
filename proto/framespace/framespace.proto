syntax = "proto3";

package framespace;

/** Axis Space 
* Top level description of a dimension: 
* Samples, Genomic Labels, Clinical Terms, etc.
**/
message AxisSpace {
	string name = 1;
	string description = 2;
}

/**  Key
* A global vector identifier (ex: sample1)
* Belongs to a KeySpace, actually is the key portion 
* of any key value data in framespace
**/
message Key {
	string value = 1;
	int32 keySpaceId = 2;
}

/** KeySpace is the set of keys that a project has defined, for a given AxisSpace 
* Example: (sample1, sample2, sample3)
* Restrictions on keys could be defined in the metadata field.
**/
message KeySpace {
	int32 id = 1;
	AxisSpace axis_space = 2;
	repeated Key keys = 3;
	map<string, string> metadata = 4;
}

/** Dimension is a subset of Keys from a KeySpace 
* axis space inherited from keyspace
* keys, is the actual subset list
**/
message Dimension {
	int32 keySpaceId = 1;
	repeated Key keys = 2;
}

/** Support for arbitrary data types 
* A cell may have only one data type
* Consider moving to Any type after more development
**/
message Cell {
	oneof cell_type {
		float float_data = 1;
		string str_data = 2;
		bool bool_data = 3;
		int32 int_data = 4; 
		sint32 sint_data = 5;
	}
}

/** Optional index order 
* Key should be the alternate dimension's key
* {'vector_key': [{'sample1': 0}, {'sample2':1}]}
* vector_key is a key from the dimension major,
* sample1 is a key from the dimension minor
**/
message Vector {
	int32 index = 1;
	string key = 2;
	KeyCellMap contents = 3;
	map<string, string> info = 4;
}

/** Dataframe consists of two dimensions 
* and a set of vectors
**/
message DataFrame {
	string id = 1;
	Dimension major = 2;
	Dimension minor = 3;
	map<string, string> metadata = 4;
	repeated Vector contents = 5;
}

/** A Project has a set of keys associated with it.
* Select project, access keyspace
**/
message Project {
	string name = 1;
	int32 keySpaceId = 2;
	map<string, string> metadata = 3;
}

/** special key: cell map **/
message KeyCellMap {
	Key key = 1;
	Cell value = 2;
}
